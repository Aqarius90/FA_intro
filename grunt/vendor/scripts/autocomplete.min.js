"use strict";!function(t){var e={init:function(e){return e=t.extend({dataType:"json",localCache:!0,remoteCache:!0,cssPrefix:"ac",delay:100,maxResults:10,minChars:1,mustMatch:!1,params:{},pickFirst:!0,preventSubmit:!0,format:function(t,e){return e.label},match:function(t,e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())},receive:function(t){return t}},e),0===t("."+e.cssPrefix+"-results").length&&(t("body").prepend('<ul class="'+e.cssPrefix+'-results"></ul>'),t("."+e.cssPrefix+"-results").on("mouseover.autologic","li",function(){t(this).data("autocomplete").autocomplete("_focusResult",t(this).index())}),t("."+e.cssPrefix+"-results").on("mousedown.autologic","li",function(){return t(this).data("autocomplete").autocomplete("_pick"),!0})),this.each(function(){var a=t(this),o=a.data("autocomplete");void 0===o&&(o={dataType:e.dataType,dataSrc:e.dataSrc,focusedResultIndex:-1,cache:{},lastKeyCode:null,lastResult:null,lastValue:null,options:e,resultsElement:t("."+e.cssPrefix+"-results")},a.data("autocomplete",o),a.attr("autocomplete","off"),a.bind("keydown.autocomplete",function(t){switch(a.data("autocomplete").lastKeyCode=t.keyCode,t.keyCode){case 38:t.preventDefault(),a.autocomplete("_focusPrevResult");break;case 40:a.autocomplete("_focusNextResult");break;case 9:var e=a.autocomplete("_pick");e||t.preventDefault();break;case 13:var e=a.autocomplete("_pick");(!e||a.data("autocomplete").options.preventSubmit)&&t.preventDefault();break;default:a.data("autocomplete").activeResultIndex=-1,a.data("autocomplete").delay&&(clearTimeout(a.data("autocomplete").delay),delete a.data("autocomplete").delay),a.data("autocomplete").delay=setTimeout(function(){a.autocomplete("_change")},a.data("autocomplete").options.delay)}}),a.bind("blur.autocomplete",function(){t(this).autocomplete("_hideResults")}),a.bind("search.autocomplete",function(e,a){var o=t(this),s=[];void 0!==o.data("autocomplete").cache[a]&&o.data("autocomplete").cache.hasOwnProperty(a)&&(s=cache[a]);var l=o.data("autocomplete").dataSrc;if(s.length>0)o.autocomplete("_receive",a,s);else if("string"!=typeof l&&l.length>0)o.autocomplete("_receive",a,o.data("autocomplete").options.receive(l));else if("string"==typeof l){var u=t.extend(o.data("autocomplete").options.params,{q:a});t.ajax({dataType:o.data("autocomplete").options.dataType,url:l,cache:o.data("autocomplete").options.remoteCache,context:o,data:u,traditional:!0,success:function(t){this.autocomplete("_receive",this.data("autocomplete").lastValue,this.data("autocomplete").options.receive(t))}})}else o.removeClass(o.data("autocomplete").options.cssPrefix+"-searching")}),a.bind("pick.autocomplete",function(e,a,o){var s=t(this);s.val(o.value),s.data("autocomplete").lastValue=o.value,t(this).autocomplete("_hideResults")}),e.search&&a.bind("search.autocomplete",search))})},destroy:function(){return this.each(function(){var e=t(this);e.unbind(".autocomplete"),e.removeData("autocomplete")})},flush:function(){return this.each(function(){var e=t(this);e.data("autocomplete").cache={}})},_cacheResults:function(t,e){this.data("autocomplete").options.localCache&&(this.data("autocomplete").cache[t]=e)},_change:function(){var e=this.data("autocomplete").resultsElement,a=t.trim(this.val());a!==this.data("autocomplete").lastValue&&(this.data("autocomplete").lastValue=a,a.length>=this.data("autocomplete").options.minChars?(this.addClass(this.data("autocomplete").options.cssPrefix+"-searching"),this.autocomplete("_search",a)):(0===a.length&&this.autocomplete("_blurResult"),this.removeClass(this.data("autocomplete").options.cssPrefix+"-searching"),e.removeClass(this.data("autocomplete").options.cssPrefix+"-visible")))},_search:function(t){this.trigger("search.autocomplete",[t])},_receive:function(e,a){var o=0,s=this.data("autocomplete").resultsElement;this.removeClass(this.data("autocomplete").options.cssPrefix+"-searching"),s.html(""),0!==a.length&&this.is(":focus")||this.autocomplete("_hideResults");var l=-1,u=[];for(o=0;o<a.length;o++)if(this.data("autocomplete").options.match(e,a[o])){u.push(a[o]),null!==this.data("autocomplete").lastResult&&this.data("autocomplete").lastResult.value===a[o].value&&(l=u.length-1);var i=s.append("<li>"+this.data("autocomplete").options.format(e,a[o])+"</li>");if(t(i).find("li:last").data("autocomplete",this),t(i).find("li:last").data("result.autocomplete",a[o]),u.length>=this.data("autocomplete").options.maxResults)break}this.data("autocomplete").focusedResultIndex=-1,this.data("autocomplete").lastResult=null,u.length>0?(l>-1?this.autocomplete("_focusResult",l):this.data("autocomplete").options.pickFirst&&this.autocomplete("_focusResult",0),this.autocomplete("_cacheResults",u),this.autocomplete("_showResults")):this.autocomplete("_hideResults")},_hideResults:function(){var t=this.data("autocomplete").resultsElement;this.data("autocomplete").delay&&(clearTimeout(this.data("autocomplete").delay),delete this.data("autocomplete").delay),this.removeClass(this.data("autocomplete").options.cssPrefix+"-searching"),t.removeClass(this.data("autocomplete").options.cssPrefix+"-visible")},_showResults:function(){var t=this.data("autocomplete").resultsElement,e=this.offset();t.css({left:e.left,top:e.top+this.outerHeight(),width:this.outerWidth()}),0===parseInt(t.css("width"))&&t.css("width",this.innerWidth()),t.addClass(this.data("autocomplete").options.cssPrefix+"-visible")},_blurResult:function(){var t=this.data("autocomplete").resultsElement;this.data("autocomplete").focusedResultIndex=-1,this.data("autocomplete").lastResult=null,t.find("li").removeClass("focused")},_focusResult:function(e){var a=this.data("autocomplete").resultsElement,o=a.find("li").length;return 0===o?void this.autocomplete("_blurResult"):(a.find("li").removeClass("focused"),t(a.find("li")[e]).addClass("focused"),this.data("autocomplete").lastResult=t(a.find("li")[e]).data("result.autocomplete"),void(this.data("autocomplete").focusedResultIndex=e))},_focusPrevResult:function(){var t=this.data("autocomplete").resultsElement.find("li").length,e=this.data("autocomplete").focusedResultIndex-1;0>e&&(e=t-1),this.autocomplete("_focusResult",e)},_focusNextResult:function(){var t=this.data("autocomplete").resultsElement.find("li").length,e=this.data("autocomplete").focusedResultIndex+1;e>t-1&&(e=0),this.autocomplete("_focusResult",e)},_pick:function(){var e=this.data("autocomplete").resultsElement;if(-1===this.data("autocomplete").focusedResultIndex)return this.data("autocomplete").options.mustMatch?!1:!0;var a=this.data("autocomplete").focusedResultIndex,o=t.trim(this.val()),s=t(e.find("li")[a]).data("result.autocomplete");return this.trigger("pick.autocomplete",[o,s])}};t.fn.autocomplete=function(a){return void 0!==e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof a||void 0===a?e.init.apply(this,arguments):void t.error("Method "+a+" does not exist on jQuery.autocomplete")}}(jQuery);